////////Cac timer su dung millis//////////////
bool MilisTimer1(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer2(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer3(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer4(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer5(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer6(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer7(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer8(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer9(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer10(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer11(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer12(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer13(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer14(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer15(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer16(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer17(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer18(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer19(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer20(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer21(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer22(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer23(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer24(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer25(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer26(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimerM1(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimerM2(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimerM3(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimerM4(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimerRead(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisBlink(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimerMM1(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimerMM2(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimerLR(bool state, int time_delay,int CurrentSpeed)
{
  static long dtime; 
  static bool value;
  static int sub_CurrentSpeed;
  static long TimeRemain;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
  if ( CurrentSpeed == 0 && sub_CurrentSpeed !=0)
  {
    TimeRemain = millis()-dtime;
  }
  if ( CurrentSpeed ==0)
  {
    dtime = millis() -TimeRemain;
  }
  //Serial.println ("Thoi gian con lai:" + (String)(millis() - dtime));
   sub_CurrentSpeed =  CurrentSpeed;
 return value;
}
bool MilisTimerSS(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer_RL(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
bool MilisTimer_RR(bool state, int time_delay)
{
  static long dtime; 
  static bool value;
  if((state == true))
  {
    if((millis() - dtime)>=time_delay)
    {
    value =1;
    dtime = millis();
    }
  }
  else
  {
    if ( time_delay != 0)
    {
      value = 1;
      if((millis() - dtime)>=time_delay)
      value =0;
    }
    else 
    {
      dtime = millis();
      value = 0;
      state = 0;
    }
  }
 return value;
}
